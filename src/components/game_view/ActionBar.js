import React, { useState } from 'react';
import './ActionBar.css';

function ActionBar({ character, onToggleCharacterSheet, onSaveGame, onLoadGame }) {
  const [showSaveConfirmation, setShowSaveConfirmation] = useState(false);
  const [showLoadConfirmation, setShowLoadConfirmation] = useState(false);

  const handleCharacterClick = () => {
    console.log('Character button clicked', character);
    onToggleCharacterSheet();
  };

  const handleSaveClick = () => {
    if (onSaveGame) {
      onSaveGame();
      setShowSaveConfirmation(true);
      setTimeout(() => setShowSaveConfirmation(false), 2000); // 2 Sekunden anzeigen
    }
  };

  const handleLoadClick = () => {
    if (onLoadGame) {
      onLoadGame();
      setShowLoadConfirmation(true);
      setTimeout(() => setShowLoadConfirmation(false), 2000); // 2 Sekunden anzeigen
    }
  };

  // PrÃ¼fen ob ein Spielstand existiert
  const saveExists = localStorage.getItem('rpg_character') !== null;

  return (
    <div className="action-bar">
      <button onClick={handleSaveClick} title="Spiel speichern">
        ðŸ’¾ Speichern
      </button>
      <button 
        onClick={handleLoadClick} 
        disabled={!saveExists}
        title={saveExists ? "Spiel laden" : "Kein Spielstand vorhanden"}
      >
        ðŸ“‚ Laden
      </button>
      <button onClick={handleCharacterClick} title="Charakterbogen Ã¶ffnen">
        ðŸ‘¤ Charakter
      </button>
      <button disabled title="Noch nicht implementiert">
        ðŸ“š Zauberbuch
      </button>
      <button disabled title="Noch nicht implementiert">
        ðŸŽ’ Inventar
      </button>
      
      {/* BestÃ¤tigungsmeldungen */}
      {showSaveConfirmation && (
        <div className="confirmation-message save-confirmation">
          âœ… Spiel gespeichert!
        </div>
      )}
      {showLoadConfirmation && (
        <div className="confirmation-message load-confirmation">
          âœ… Spiel geladen!
        </div>
      )}
    </div>
  );
}

export default ActionBar;